@model interaktiva20_2.Models.ViewModels.SearchResultViewModel

@section MyHeader
{
    <header>
        <div class="details-headerContainer">
            <h1>Cineast Movie Database</h1>
            <p>Home for movie lovers</p>
        </div>
    </header>
}

<main class="search-result-content">

    <h1>Search Result</h1>

    @{
        if (Model.SearchResult.Search != null)
        {
        <div class="searchPages">
            <div class="detailInlineInfo">
                <p class="total-search">Total Results: @Model.SearchResult.totalResults</p>
                <p class="total-pages">Total pages: @Model.TotalPages</p>
            </div>

            <p>Filter:</p>
            <div class="detailInlineInfo">
                <button id="search-movie-btn" class="search-filter-btn movie-details-btn" onclick="location.href='@Url.Action("Index", "SearchResult", new { pageNum = 1, searchString = (Model.SearchString+Model.MoviesOnly)})'">Movies</button>
                <button id="search-series-btn" class="search-filter-btn movie-details-btn" onclick="location.href='@Url.Action("Index", "SearchResult", new { pageNum = 1, searchString = (Model.SearchString+Model.SeriesOnly)})'">Series</button>
            </div>

            <div class="search-result-btn-flex">
                <button class="search-result-buttons search-result-first-btn" onclick="location.href='@Url.Action("Index", "SearchResult", new { pageNum = 1, Model.SearchString})'"></button>
                <button class="search-result-buttons search-result-previous-btn" onclick="location.href='@Url.Action("Index", "SearchResult", new { pageNum = (Model.CurrentPage - 1), Model.SearchString})'"></button>
                <button class="search-result-buttons search-result-next-btn" onclick="location.href='@Url.Action("Index", "SearchResult", new { pageNum = (Model.CurrentPage + 1), Model.SearchString})'"></button>
                <button class="search-result-buttons search-result-last-btn" onclick="location.href='@Url.Action("Index", "SearchResult", new { pageNum = Model.TotalPages, Model.SearchString})'"></button>
            </div>
            <p id="current-page">Current Page: @Model.CurrentPage</p>

        </div>

            foreach (var movie in Model.SearchResult.Search)
            {
                <div class="searchedMovie">
                    <img class="searchPoster" src="@movie.Poster" />
                    <div class="flexitem">
                        <h2>@movie.Title</h2>
                        <p>@movie.Year</p>
                        <a href='@Url.Action("Index", "MovieDetail", new { imdbid = movie.imdbID })'>
                            <div class="movie-details-btn">To details >></div>
                        </a>
                    </div>
                </div>
            }
        }
        else
        {
            <h1 class="search-error">Sorry, no such movie could be found.</h1>
            <p class="search-error">Did you spell the title correctly?</p>

        }
    }
</main>

